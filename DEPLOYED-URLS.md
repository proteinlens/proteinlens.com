# ProteinLens Deployed URLs

## ⚠️ Current Status: Mixed Deployment

**Issue**: Infrastructure partially deployed. Some resources from Bicep template (proteinlens-prod resource group), some from previous manual deployment (protein-lens resource group).

## Production Environment

### Frontend
- **URL**: https://orange-flower-06623db03.6.azurestaticapps.net
- **Resource**: protein-lens-web
- **Resource Group**: protein-lens ⚠️ (NOT from Bicep deployment)
- **Status**: ✅ Live (HTTP 200)
- **Issue**: This is from a previous deployment, NOT managed by GitHub Actions

### Backend API  
- **URL**: https://proteinlens-api-prod.azurewebsites.net
- **Resource**: proteinlens-api-prod
- **Resource Group**: proteinlens-prod ✅ (from Bicep)
- **Health Check**: https://proteinlens-api-prod.azurewebsites.net/api/health
- **Status**: ✅ Deployed via GitHub Actions

### Database
- **Server**: protein-lens-db.postgres.database.azure.com ⚠️
- **Database**: proteinlens
- **Resource Group**: protein-lens ⚠️ (NOT from Bicep deployment)
- **Expected (Bicep)**: proteinlens-db-prod.postgres.database.azure.com (doesn't exist)

### Storage
- **Account**: plprodsa85
- **Container**: meal-photos  
- **Resource Group**: proteinlens-prod ✅ (from Bicep)

### Key Vault
- **Name**: proteinlens-kv-prod
- **URI**: https://proteinlens-kv-prod.vault.azure.net/
- **Resource Group**: proteinlens-prod ✅ (from Bicep)

---

## Issues to Fix

1. **PostgreSQL server** - Bicep template claims to create `proteinlens-db-prod` but it doesn't exist
   - Actual server is `protein-lens-db` in `protein-lens` resource group
   
2. **Static Web App** - Bicep template claims to create `proteinlens-web-prod` but it doesn't exist
   - Actual app is `protein-lens-web` in `protein-lens` resource group
   - Frontend deployments via GitHub Actions are failing because the token is for the wrong resource

3. **Resource group inconsistency** - Resources split across two resource groups:
   - `proteinlens-prod`: Function App, Storage, Key Vault ✅
   - `protein-lens`: Database, Static Web App ⚠️

## Solution Options

### Option A: Delete old resources and re-deploy Bicep (RECOMMENDED)
```bash
az group delete --name protein-lens --yes
az group delete --name proteinlens-prod --yes
# Then re-run infra.yml workflow
```

### Option B: Update Bicep to use existing resources
- Modify Bicep templates to reference existing `protein-lens` resources
- Update parameter files with correct naming

---

## Notes

- The Static Web App URL is auto-generated by Azure and cannot be customized on the Free tier
- To use a custom domain (e.g., proteinlens.com), upgrade to Standard tier and configure DNS
- All resources should be in East US region

---

Last updated: 2025-12-23 02:10 UTC
